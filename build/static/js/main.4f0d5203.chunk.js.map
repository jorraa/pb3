{"version":3,"sources":["components/Filter.js","components/Person.js","components/Persons.js","components/PersonForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","value","newFilter","onChange","handleFilterChange","Person","person","name","number","id","onClick","event","confirm","target","handleDelete","parseInt","text","Persons","personsToShow","map","i","key","PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","className","console","log","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","errorMessage","setErrorMessage","infoMessage","setInfoMessage","useEffect","personService","initialPersons","preventDefault","length","personObject","date","Date","toISOString","filter","returnedPerson","concat","setTimeout","catch","error","p","toLowerCase","includes","removedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4f0d5203.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = (props) => \r\n<p>\r\n    filter shown with: <input value={props.newFilter}\r\n    onChange={props.handleFilterChange}/>\r\n</p>\r\nexport default Filter","import React from 'react'\r\n\r\nconst Person = (props) => {\r\n    const handleClick = (event) => {\r\n        // eslint-disable-next-line no-restricted-globals\r\n        const ok = confirm('Delete ' + event.target.name + '?')\r\n        if(ok){ \r\n            props.handleDelete(parseInt(event.target.id)) //id was string\r\n        }\r\n    }\r\n    \r\n    return(\r\n    <li>\r\n        #{props.person.name}# {props.person.number }\r\n        <button id={props.person.id} name={props.person.name} onClick={handleClick}>\r\n            {props.text}\r\n        </button>\r\n    </li>\r\n    )\r\n}\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\nconst Persons = (props) => \r\n<ul>\r\n    {props.personsToShow(props.newFilter).map((person, i) => \r\n        <Person key={person.name} person={person} \r\n        handleDelete={props.handleDelete} text=\"delete\"/>\r\n    )}\r\n</ul>\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    return(\r\n    <form onSubmit={props.addPerson}>\r\n        <div>\r\n            name: <input value={props.newName}\r\n            onChange={props.handleNameChange}/>\r\n        </div>\r\n        <div>number: <input value={props.newNumber}\r\n            onChange={props.handleNumberChange}/>\r\n        </div>\r\n        <div>\r\n            <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseUrl = 'https://jorraa-pb3.herokuapp.com/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n  \r\n  const update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const remove = (id) => {\r\n      const request = axios.delete(`${baseUrl}/${id}`)\r\n      return request.then(response => response.data)\r\n  }\r\n\r\n  export default { getAll, create, update, remove }","import React from 'react'\r\n\r\nconst Notification = ({ message ,className}) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\nconsole.log(\"className\", className)\r\n  return (\r\n    <div className={className}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [infoMessage, setInfoMessage] = useState(null)\n  \n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  //Useless after asking confirm\n  //const alertDuplicate= (newName) => alert(`${newName} is already added to phonebook`)\n  \n  const addPerson = (event) => {    \n    event.preventDefault()   \n    // no empty name\n    if(!newName || newName.length === 0) return\n\n    const personObject = {\n      name: newName,\n      number: newNumber,\n      date: new Date().toISOString()\n    }\n\n    if(persons.filter(person => person.name === newName).length){\n      //first chnage number if person exists\n\n      // eslint-disable-next-line no-restricted-globals\n      const ok = confirm(newName + ' is already added to phonebook, replace the old number with new one?')\n      if(!ok){ \n          return\n      } \n      const person = persons.filter(person => person.name === newName)[0]\n\n      personService.update(person.id, personObject)\n      .then(returnedPerson => {\n        setPersons(persons.filter(person => person.name !== newName).concat(returnedPerson))\n        // eslint-disable-next-line no-undef\n        setInfoMessage(`${returnedPerson.name}'s number changed in phonebook!`)\n        setTimeout(() => {\n          setInfoMessage(null)\n        }, 3000)\n      })\n      .catch(error => {\n        setErrorMessage(`Information of ${person.name} has already been removed from server`)\n        setPersons(persons.filter(p => p.id !== person.id))\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }else{ //normal create\n      personService\n      .create(personObject)\n      .then(returnedPerson => {\n        console.log('retPers', returnedPerson)\n        setPersons(persons.concat(returnedPerson))\n        // eslint-disable-next-line no-undef\n        setInfoMessage(`${returnedPerson.name} added to phonebook!`)\n        setTimeout(() => {\n          setInfoMessage(null)\n        }, 3000)\n      })\n      .catch(error => {\n        console.log(\"Error in create\", error.message)\n        setErrorMessage(\"Adding new number failed!\")\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n  \n  const handleDelete = id => {\n    const removedPerson = persons.filter(person => person.id === id)[0]\n    personService.remove(id)\n    .then( () => {\n      setPersons(persons.filter(person => person.id !== id))\n      // eslint-disable-next-line no-undef\n      setInfoMessage(`${removedPerson.name} removed from phonebook!`)\n      setTimeout(() => {\n        setInfoMessage(null)\n      }, 3000)\n    })  \n    .catch(error => {\n      console.log(\"error in delete\", error.message)\n      if(error.message.includes('404')){\n        setErrorMessage(`Information of ${removedPerson.name} has already been removed from server`)\n        setPersons(persons.filter(person => person.id !== id))\n      }else{\n        setErrorMessage(`Removing ${removedPerson.name} from phonebook failed!`)\n      }\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    })\n  }\n\n  const handleNameChange = (event) => {    \n    setNewName(event.target.value)  \n  }\n  const handleNumberChange = (event) => {    \n    setNewNumber(event.target.value)  \n  }\n  const handleFilterChange = (event) => {    \n    setNewFilter(event.target.value)  \n  }\n\n  const personsToShow = newFilter =>\n    newFilter.length\n      ?persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n      :persons\nconsole.log(\"persons\", persons)\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} className='error'/>\n      <Notification message={infoMessage} className='info'/>\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange}/>\n\n      <h3>add a new</h3>\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber}\n        handleNameChange={handleNameChange} handleNumberChange={handleNumberChange}/>\n\n      <h3>Numbers</h3>\n      <Persons personsToShow={personsToShow} newFilter={newFilter} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}