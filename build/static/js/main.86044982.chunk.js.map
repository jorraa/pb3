{"version":3,"sources":["components/Filter.js","components/Person.js","components/Persons.js","components/PersonForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","value","newFilter","onChange","handleFilterChange","Person","person","name","number","id","onClick","event","confirm","target","handleDelete","text","Persons","personsToShow","map","i","key","PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","baseUrl","axios","get","then","response","data","newObject","post","catch","error","console","log","put","delete","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","errorMessage","setErrorMessage","infoMessage","setInfoMessage","useEffect","personService","initialPersons","preventDefault","setTimeout","personObject","date","Date","toISOString","filter","length","returnedPerson","concat","p","toLowerCase","includes","removedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.86044982.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = (props) => \r\n<p>\r\n    filter shown with: <input value={props.newFilter}\r\n    onChange={props.handleFilterChange}/>\r\n</p>\r\nexport default Filter","import React from 'react'\r\n\r\nconst Person = (props) => {\r\n    const handleClick = (event) => {\r\n        // eslint-disable-next-line no-restricted-globals\r\n        const ok = confirm('Delete ' + event.target.name + '?')\r\n        if(ok){ \r\n            props.handleDelete(event.target.id)\r\n        }\r\n    }\r\n    \r\n    return(\r\n    <li>\r\n        #{props.person.name}# {props.person.number }\r\n        <button id={props.person.id} name={props.person.name} onClick={handleClick}>\r\n            {props.text}\r\n        </button>\r\n    </li>\r\n    )\r\n}\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\nconst Persons = (props) => \r\n<ul>\r\n    {props.personsToShow(props.newFilter).map((person, i) => \r\n        <Person key={person.id} person={person} \r\n        handleDelete={props.handleDelete} text=\"delete\"/>\r\n    )}\r\n</ul>\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    return(\r\n    <form onSubmit={props.addPerson}>\r\n        <div>\r\n            name: <input value={props.newName}\r\n            onChange={props.handleNameChange}/>\r\n        </div>\r\n        <div>number: <input value={props.newNumber}\r\n            onChange={props.handleNumberChange}/>\r\n        </div>\r\n        <div>\r\n            <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\n//const baseUrl = 'https://jorraa-pb3.herokuapp.com/api/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request\r\n      .then(response => response.data)\r\n      .catch(error => {\r\n        console.log(\"error\", error.response.data.error)\r\n        return error.response.data\r\n      })\r\n  }\r\n  \r\n  const update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const remove = (id) => {\r\n      const request = axios.delete(`${baseUrl}/${id}`)\r\n      return request.then(response => response.data)\r\n  }\r\n\r\n  export default { getAll, create, update, remove }","import React from 'react'\r\n\r\nconst Notification = ({ message ,className}) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={className}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [infoMessage, setInfoMessage] = useState(null)\n  \n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  //Useless after asking confirm\n  //const alertDuplicate= (newName) => alert(`${newName} is already added to phonebook`)\n  \n  const addPerson = (event) => {    \n    event.preventDefault()   \n    // no empty name, must be 2 long\n    if(!newName) {\n      setErrorMessage('name missing')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      return\n    }\n    // no empty number\n    if(!newNumber){\n      setErrorMessage('number missing')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      return\n    }\n    \n    const personObject = {\n      name: newName,\n      number: newNumber,\n      date: new Date().toISOString()\n    }\n    if(persons.filter(person => person.name === newName).length){\n      //first chnage number if person exists\n\n      // eslint-disable-next-line no-restricted-globals\n      const ok = confirm(newName + ' is already added to phonebook, replace the old number with new one?')\n      if(!ok){ \n          return\n      } \n      const person = persons.filter(person => person.name === newName)[0]\n\n      personService.update(person.id, personObject)\n      .then(returnedPerson => {\n        setPersons(persons.filter(person => person.name !== newName).concat(returnedPerson))\n        // eslint-disable-next-line no-undef\n        setInfoMessage(`${returnedPerson.name}'s number changed in phonebook!`)\n        setTimeout(() => {\n          setInfoMessage(null)\n        }, 3000)\n      })\n      .catch(error => {\n        setErrorMessage(`Information of ${person.name} has already been removed from server`)\n        setPersons(persons.filter(p => p.id !== person.id))\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }else{ //normal create\nconsole.log(\"normalCreate\")      \n      personService\n      .create(personObject)\n      .then(returnedPerson => {\n        console.log('retPers', returnedPerson)\n        if(returnedPerson.error) {\n          setErrorMessage(returnedPerson.error)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 8000)\n          return\n        }\n        setPersons(persons.concat(returnedPerson))\n        // eslint-disable-next-line no-undef\n        setInfoMessage(`${returnedPerson.name} added to phonebook!`)\n        setTimeout(() => {\n          setInfoMessage(null)\n        }, 3000)\n      })\n      .catch((error) => {\n        console.log(\"Error in create\", error)\n        setErrorMessage(\"Adding new number failed!\")\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n  \n  const handleDelete = id => {\nconsole.log(\"handleDelete\", id)    \n    const removedPerson = persons.filter(person => person.id === id)[0]\n    personService.remove(id)\n    .then( () => {\n      setPersons(persons.filter(person => person.id !== id))\n      // eslint-disable-next-line no-undef\n      setInfoMessage(`${removedPerson.name} removed from phonebook!`)\n      setTimeout(() => {\n        setInfoMessage(null)\n      }, 3000)\n    })  \n    .catch(error => {\n      console.log(\"error in delete\", error.message)\n      if(error.message.includes('404')){\n        setErrorMessage(`Information of ${removedPerson.name} has already been removed from server`)\n        setPersons(persons.filter(person => person.id !== id))\n      }else{\n        setErrorMessage(`Removing ${removedPerson.name} from phonebook failed!`)\n      }\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    })\n  }\n\n  const handleNameChange = (event) => {    \n    setNewName(event.target.value)  \n  }\n  const handleNumberChange = (event) => {    \n    setNewNumber(event.target.value)  \n  }\n  const handleFilterChange = (event) => {    \n    setNewFilter(event.target.value)  \n  }\n\n  const personsToShow = newFilter =>\n    newFilter.length\n      ?persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n      :persons\nconsole.log(\"persons\", persons)\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} className='error'/>\n      <Notification message={infoMessage} className='info'/>\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange}/>\n\n      <h3>add a new</h3>\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber}\n        handleNameChange={handleNameChange} handleNumberChange={handleNumberChange}/>\n\n      <h3>Numbers</h3>\n      <Persons personsToShow={personsToShow} newFilter={newFilter} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}