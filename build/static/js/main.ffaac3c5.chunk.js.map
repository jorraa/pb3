{"version":3,"sources":["components/Filter.js","components/Person.js","components/Persons.js","components/PersonForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","value","newFilter","onChange","handleFilterChange","Person","person","name","number","id","onClick","event","confirm","target","handleDelete","text","Persons","personsToShow","map","key","PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","baseUrl","axios","get","then","response","data","newObject","post","catch","error","put","delete","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","errorMessage","setErrorMessage","infoMessage","setInfoMessage","useEffect","personService","initialPersons","console","log","preventDefault","setTimeout","personObject","date","Date","toISOString","filter","length","returnedPerson","concat","p","toLowerCase","includes","removedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ffaac3c5.chunk.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Filter = (props) =>\r\n  <p>\r\n    filter shown with: <input value={props.newFilter}\r\n      onChange={props.handleFilterChange}/>\r\n  </p>\r\n\r\nFilter.propTypes = {\r\n  newFilter: PropTypes.string.isRequired,\r\n  handleFilterChange: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Person = (props) => {\r\n  const handleClick = (event) => {\r\n    // eslint-disable-next-line no-restricted-globals\r\n    const ok = confirm('Delete ' + event.target.name + '?')\r\n    if(ok){\r\n      props.handleDelete(event.target.id)\r\n    }\r\n  }\r\n\r\n  return(\r\n    <li>\r\n      #{props.person.name}# {props.person.number }\r\n      <button id={props.person.id} name={props.person.name} onClick={handleClick}>\r\n        {props.text}\r\n      </button>\r\n    </li>\r\n  )\r\n}\r\n\r\nPerson.propTypes = {\r\n  person: PropTypes.object.isRequired,\r\n  text: PropTypes.string.isRequired,\r\n  handleDelete: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Persons = (props) =>\r\n  <ul>\r\n    {props.personsToShow(props.newFilter).map((person) =>\r\n      <Person key={person.id} person={person}\r\n        handleDelete={props.handleDelete} text=\"delete\"/>\r\n    )}\r\n  </ul>\r\n\r\nPersons.propTypes = {\r\n  newFilter: PropTypes.string,\r\n  person: PropTypes.object,\r\n  personsToShow: PropTypes.func.isRequired,\r\n  handleDelete: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst PersonForm = (props) => {\r\n  return(\r\n    <form onSubmit={props.addPerson}>\r\n      <div>\r\n        name: <input value={props.newName}\r\n          onChange={props.handleNameChange}/>\r\n      </div>\r\n      <div>number: <input value={props.newNumber}\r\n        onChange={props.handleNumberChange}/>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nPersonForm.propTypes = {\r\n  newName: PropTypes.string.isRequired,\r\n  newNumber: PropTypes.string.isRequired,\r\n  addPerson: PropTypes.func.isRequired,\r\n  handleNameChange: PropTypes.func.isRequired,\r\n  handleNumberChange: PropTypes.func.isRequired\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\n//const baseUrl = 'https://jorraa-pb3.herokuapp.com/api/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      return error.response.data\r\n    })\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Notification = (props) => {\r\n  if (props.message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={ props.className }>\r\n      { props.message }\r\n    </div>\r\n  )\r\n}\r\n\r\nNotification.propTypes = {\r\n  className: PropTypes.string,\r\n  message: PropTypes.string\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/persons'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ newFilter, setNewFilter ] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [infoMessage, setInfoMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n  //Useless after asking confirm\r\n  //const alertDuplicate= (newName) => alert(`${newName} is already added to phonebook`)\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    // no empty name, must be 2 long\r\n    if(!newName) {\r\n      setErrorMessage('name missing')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n      return\r\n    }\r\n    // no empty number\r\n    if(!newNumber){\r\n      setErrorMessage('number missing')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n      return\r\n    }\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      date: new Date().toISOString()\r\n    }\r\n    if(persons.filter(person => person.name === newName).length){\r\n      //first chnage number if person exists\r\n\r\n      // eslint-disable-next-line no-restricted-globals\r\n      const ok = confirm(newName + ' is already added to phonebook, replace the old number with new one?')\r\n      if(!ok){ return }\r\n      const person = persons.filter(person => person.name === newName)[0]\r\n\r\n      personService.update(person.id, personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.filter(person => person.name !== newName).concat(returnedPerson))\r\n          // eslint-disable-next-line no-undef\r\n          setInfoMessage(`${returnedPerson.name}'s number changed in phonebook!`)\r\n          setTimeout(() => {\r\n            setInfoMessage(null)\r\n          }, 3000)\r\n        })\r\n        .catch(() => {\r\n          setErrorMessage(`Information of ${person.name} has already been removed from server`)\r\n          setPersons(persons.filter(p => p.id !== person.id))\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n    }else{ //normal create\r\n      console.log('normalCreate')\r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          console.log('retPers', returnedPerson)\r\n          if(returnedPerson.error) {\r\n            setErrorMessage(returnedPerson.error)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 8000)\r\n            return\r\n          }\r\n          setPersons(persons.concat(returnedPerson))\r\n          // eslint-disable-next-line no-undef\r\n          setInfoMessage(`${returnedPerson.name} added to phonebook!`)\r\n          setTimeout(() => {\r\n            setInfoMessage(null)\r\n          }, 3000)\r\n        })\r\n        .catch((error) => {\r\n          console.log('Error in create', error)\r\n          setErrorMessage('Adding new number failed!')\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const handleDelete = id => {\r\n    console.log('handleDelete', id)\r\n    const removedPerson = persons.filter(person => person.id === id)[0]\r\n    personService.remove(id)\r\n      .then( () => {\r\n        setPersons(persons.filter(person => person.id !== id))\r\n        // eslint-disable-next-line no-undef\r\n        setInfoMessage(`${removedPerson.name} removed from phonebook!`)\r\n        setTimeout(() => {\r\n          setInfoMessage(null)\r\n        }, 3000)\r\n      })\r\n      .catch(error => {\r\n        console.log('error in delete', error.message)\r\n        if(error.message.includes('404')){\r\n          setErrorMessage(`Information of ${removedPerson.name} has already been removed from server`)\r\n          setPersons(persons.filter(person => person.id !== id))\r\n        }else{\r\n          setErrorMessage(`Removing ${removedPerson.name} from phonebook failed!`)\r\n        }\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      })\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n  const handleFilterChange = (event) => {\r\n    setNewFilter(event.target.value)\r\n  }\r\n\r\n  const personsToShow = newFilter =>\r\n    newFilter.length\r\n      ?persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\r\n      :persons\r\n\r\n  console.log('persons', persons)\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMessage} className='error'/>\r\n      <Notification message={infoMessage} className='info'/>\r\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange}/>\r\n\r\n      <h3>add a new</h3>\r\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber}\r\n        handleNameChange={handleNameChange} handleNumberChange={handleNumberChange}/>\r\n\r\n      <h3>Numbers</h3>\r\n      <Persons personsToShow={personsToShow} newFilter={newFilter} handleDelete={handleDelete}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\n//import * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n//serviceWorker.unregister();\r\n"],"sourceRoot":""}